<div class="dashboard-container fade-in">
  <div class="page-header">
    <h1 class="page-title">Dashboard</h1>
    <p class="page-subtitle">Overview of your business metrics</p>
  </div>

  <div *ngIf="loading" class="loading-container fade-in">
    <!-- Skeleton Stats -->
    <div class="grid grid-cols-4 gap-3 mb-4">
      <div *ngFor="let i of [1,2,3,4]" class="stat-card">
        <div class="skeleton skeleton-avatar"></div>
        <div class="flex-1">
          <div class="skeleton skeleton-text" style="width: 60%;"></div>
          <div class="skeleton skeleton-title" style="width: 80%;"></div>
          <div class="skeleton skeleton-text" style="width: 40%;"></div>
        </div>
      </div>
    </div>
    
    <!-- Skeleton Cards -->
    <div class="grid grid-cols-2 gap-3">
      <div *ngFor="let i of [1,2]" class="card">
        <div class="card-header">
          <div class="skeleton skeleton-title" style="width: 150px;"></div>
        </div>
        <div class="card-body">
          <div *ngFor="let j of [1,2,3]" class="mb-3">
            <div class="skeleton skeleton-text" style="width: 100%; margin-bottom: 12px;"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading">
    <!-- Stats Grid -->
    <div class="grid grid-cols-4 gap-3 mb-4">
      <div *ngFor="let stat of stats; let i = index" 
           class="stat-card fade-in-up" 
           [class.stagger-1]="i === 0"
           [class.stagger-2]="i === 1"
           [class.stagger-3]="i === 2"
           [class.stagger-4]="i === 3"
           [style.border-left-color]="stat.color">
        <div class="stat-icon pulse" [style.background]="stat.color + '20'" [style.color]="stat.color" [innerHTML]="stat.icon"></div>
        <div class="stat-content">
          <div class="stat-label">{{ stat.title }}</div>
          <div class="stat-value gradient-text">{{ stat.value }}</div>
          <div class="stat-change" [class.positive]="stat.trend === 'up'" [class.negative]="stat.trend === 'down'">
            <svg *ngIf="stat.trend === 'up'" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" stroke-width="2" stroke-linecap="round"/>
              <polyline points="17 6 23 6 23 12" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <svg *ngIf="stat.trend === 'down'" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="23 18 13.5 8.5 8.5 13.5 1 6" stroke-width="2" stroke-linecap="round"/>
              <polyline points="17 18 23 18 23 12" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>{{ stat.change }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Content Grid -->
    <div class="grid grid-cols-2 gap-3">
      <!-- Recent Bills -->
      <div class="card scale-in stagger-1">
        <div class="card-header flex justify-between items-center">
          <h2 class="card-title">Recent Bills</h2>
          <a routerLink="/bills" class="text-link">View All →</a>
        </div>
        <div class="card-body">
          <div *ngIf="recentBills.length === 0" class="empty-state">
            <p>No bills found</p>
          </div>
          <div *ngIf="recentBills.length > 0" class="list">
            <div *ngFor="let bill of recentBills" class="list-item">
              <div class="flex items-center gap-2">
                <div class="item-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke-width="2"/>
                    <polyline points="14 2 14 8 20 8" stroke-width="2"/>
                  </svg>
                </div>
                <div class="flex-1">
                  <div class="item-title">Bill #{{ bill.id }}</div>
                  <div class="item-subtitle">{{ formatDate(bill.billingDate) }}</div>
                </div>
                <span class="badge badge-info">Customer #{{ bill.customerId }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Low Stock Products -->
      <div class="card scale-in stagger-2">
        <div class="card-header flex justify-between items-center">
          <h2 class="card-title">Low Stock Alert</h2>
          <a routerLink="/products" class="text-link">View All →</a>
        </div>
        <div class="card-body">
          <div *ngIf="lowStockProducts.length === 0" class="empty-state">
            <p>All products are well stocked! ✓</p>
          </div>
          <div *ngIf="lowStockProducts.length > 0" class="list">
            <div *ngFor="let product of lowStockProducts" class="list-item">
              <div class="flex items-center gap-2">
                <div class="item-icon warning">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="10" stroke-width="2"/>
                    <line x1="12" y1="8" x2="12" y2="12" stroke-width="2" stroke-linecap="round"/>
                    <line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </div>
                <div class="flex-1">
                  <div class="item-title">{{ product.name }}</div>
                  <div class="item-subtitle">{{ product.price }} DH</div>
                </div>
                <span class="badge badge-warning">{{ product.quantity }} left</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
